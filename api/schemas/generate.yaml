$id: TODO
$schema: https://json-schema.org/draft/2020-12/schema

$defs:
  grid:
    type: object
    additionalProperties: False
    required: [width, height]
    width:
      type: number
    height:
      type: number
    labels:
      type: object
      additionalProperties: False
      properties:
        title:
          type: string
        rows:
          type: array
          items:
            type: string
        columns:
          type: array
          items:
            type: string
    order:
      type: array
      items: number

  job_base:
    type: object
    additionalProperties: true
    required: [
      device,
      model,
      pipeline,
      scheduler,
      prompt,
      cfg,
      steps,
      seed,
    ]
    properties:
      batch:
        type: number
      device:
        type: string
      model:
        type: string
      control:
        type: string
      pipeline:
        type: string
      scheduler:
        type: string
      prompt:
        type: string
      negative_prompt:
        type: string
      cfg:
        type: number
      eta:
        type: number
      steps:
        type: number
      tiled_vae:
        type: boolean
      tiles:
        type: number
      overlap:
        type: number
      seed:
        type: number
      stride:
        type: number

  job_txt2img:
    allOf:
      - $ref: "#/$defs/job_base"
      - type: object
        additionalProperties: False
        required: [
          height,
          width,
        ]
        properties:
          width:
            type: number
          height:
            type: number

  job_img2img:
    allOf:
      - $ref: "#/$defs/job_base"
      - type: object
        additionalProperties: False
        required: []
        properties:
          loopback:
            type: number

type: object
additionalProperties: False
properties:
  txt2img:
    type: array
    items:
      $ref: "#/$defs/job_txt2img"
  img2img:
    type: array
    items:
      $ref: "#/$defs/job_img2img"
  grid:
    type: array
    items:
      $ref: "#/$defs/grid"
